"use strict";(self.webpackChunkturkmenexpressadmin=self.webpackChunkturkmenexpressadmin||[]).push([[765],{3073:function(e,t,n){var a=n(7652),r=(n(2791),n(184));t.Z=function(e){var t=e.dataSource,n=e.columns,o=e.pagination,c=e.active,i=e.loading;return(0,r.jsx)(a.Z,{rowClassName:function(e,t){return e.id==c&&"active-row"},dataSource:t,columns:n,pagination:o,loading:i||!1})}},102:function(e,t,n){n.d(t,{b:function(){return u},J:function(){return s}});var a=n(4165),r=n(5861),o=n(1243),c=function(){var e=JSON.parse(localStorage.getItem("turkmenExpress-admin"));return e?e.access:null}(),i="https://turkmenexpress.com.tm/api/administrator/",u=o.Z.create({baseURL:i,timeout:6e4,headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(c)}}),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.post("".concat(i,"login/"),{phone_number:t,password:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},8765:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var a=n(3433),r=n(4165),o=n(5861),c=n(9439),i=n(2791),u=n(7027),s=n(814),d=n(7145),l=n(102),p=n(3073),f=n(1243),v=n(184);var h=function(){var e=(0,i.useState)([]),t=(0,c.Z)(e,2),n=t[0],h=t[1],m=(0,i.useState)(!1),g=(0,c.Z)(m,2),x=g[0],y=g[1],b=(0,i.useState)(!1),Z=(0,c.Z)(b,2),k=Z[0],w=Z[1],j=(0,i.useState)(null),S=(0,c.Z)(j,2),C=S[0],N=S[1],_=(0,i.useState)(!1),E=(0,c.Z)(_,2),I=E[0],T=E[1],P=(0,i.useState)(null),F=(0,c.Z)(P,2),L=F[0],O=F[1],z=(0,i.useState)([]),A=(0,c.Z)(z,2),B=A[0],D=A[1],J=(0,i.useState)([]),R=(0,c.Z)(J,2),U=R[0],q=R[1],G=(0,i.useState)([]),H=(0,c.Z)(G,2),K=H[0],M=H[1],Q=(0,i.useState)([]),V=(0,c.Z)(Q,2),W=V[0],X=V[1],Y=(0,i.useState)(!1),$=(0,c.Z)(Y,2),ee=$[0],te=$[1],ne=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,l.b.delete("subcategory-options-group/delete/".concat(C.id));case 4:t=n.filter((function(e){return e.id!==C.id})),h(t),u.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e!"),y(!1),w(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),w(!1),u.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=[],t=[],n=[];te(!0),l.b.get("subcategory-options-group/list").then(function(){var a=(0,o.Z)((0,r.Z)().mark((function a(o){var c;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return O(o.data.count),null===(c=o.data)||void 0===c||c.results.forEach((function(t){e.push({key:t.id,id:t.id,subcategory:"".concat(t.subcategory.category.name_ru," | ").concat(t.subcategory.name_ru),option:t.option.name_ru})})),a.next=4,f.Z.get("https://turkmenexpress.com.tm/api/library/subcategories/list/");case 4:return a.sent.data.forEach((function(e){t.push({label:"".concat(e.category.name_ru," | ").concat(e.name_ru),value:"".concat(e.category.name_ru," | ").concat(e.name_ru),id:e.id})})),a.next=8,l.b.get("options-group/list/");case 8:a.sent.data.forEach((function(e){n.push({label:e.name_ru,value:e.name_ru,id:e.id})})),M(t),X(n),h(e),te(!1);case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}),[]);var ae=[{title:"id",dataIndex:"id",key:"id",width:"65px",style:{alignItems:"center"}},{title:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",dataIndex:"subcategory",key:"subcategory"},{title:"\u041e\u043f\u0446\u0438\u044f",dataIndex:"option",key:"option"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"110px",render:function(e,t){return(0,v.jsx)("div",{className:"delete-icon",onClick:function(){return e=t,y(!0),void N(e);var e},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}},{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"120px",render:function(e,t){return(0,v.jsx)("div",{className:"update-icon",onClick:function(){return re(t)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}}],re=function(e){e.id?(N(e),D(null===K||void 0===K?void 0:K.filter((function(t){return t.value==e.subcategory}))),q(null===W||void 0===W?void 0:W.filter((function(t){return t.value==e.option})))):N(null),T(!0)},oe=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,c,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),e.prev=1,null!==C&&void 0!==C&&C.id){e.next=8;break}t=[],B.forEach((function(e){U.forEach(function(){var n=(0,o.Z)((0,r.Z)().mark((function n(a){var o,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new FormData).append("subcategory",e.id),o.append("option",a.id),n.next=5,l.b.post("subcategory-options-group/add/",o);case 5:c=n.sent,t.push({key:c.data.id,id:c.data.id,subcategory:e.label,option:a.label});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),h([].concat((0,a.Z)(n),t)),e.next=16;break;case 8:return(c=new FormData).append("subcategory",B[0].id),c.append("option",U[0].id),e.next=13,l.b.patch("subcategory-options-group/update/".concat(C.id,"/"),c);case 13:e.sent,i=n.findIndex((function(e){return e.id==C.id})),h((function(e){var t=e;return t[i].subcategory=B[0].value,t[i].option=U[0].value,t}));case 16:q([]),D([]),w(!1),u.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),T(!1),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(1),w(!1),u.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,l.b.get("subcategory-options-group/list?page=".concat(t));case 3:o=e.sent,null===(n=o.data.results)||void 0===n||n.forEach((function(e){a.push({key:e.id,id:e.id,subcategory:"".concat(e.subcategory.category.name_ru," | ").concat(e.subcategory.name_ru),option:e.option.name_ru})})),h(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.Z,{title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438",open:I,onOk:oe,confirmLoading:k,onCancel:function(){q([]),D([]),T(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",width:"700px",okType:"primary",style:{top:"150px"},children:(0,v.jsxs)("div",{className:"banner-add-container",children:[(0,v.jsxs)("div",{className:"add-left",children:[(0,v.jsx)("div",{className:"add-column",children:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f:"}),(0,v.jsx)("div",{className:"add-column",children:"\u041e\u043f\u0446\u0438\u044f:"})]}),(0,v.jsxs)("div",{className:"add-right",children:[(0,v.jsx)("div",{className:"subcategory-settings-add-column add-column",children:(0,v.jsx)(d.Z,{value:B,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onChange:function(e){return function(e){var t=[];null===K||void 0===K||K.forEach((function(n){e.forEach((function(e){return n.value==e&&t.push({id:n.id,label:e,value:e})}))})),D(t)}(e)},options:K})}),(0,v.jsx)("div",{className:"subcategory-settings-add-column add-column",children:(0,v.jsx)(d.Z,{value:U,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u043f\u0446\u0438\u044e",onChange:function(e){return function(e){var t=[];null===W||void 0===W||W.forEach((function(n){e.forEach((function(e){return n.value==e&&t.push({id:n.id,label:e,value:e})}))})),q(t)}(e)},options:W})})]})]})}),(0,v.jsx)(s.Z,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",open:x,onOk:ne,confirmLoading:k,onCancel:function(){y(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",okType:"primary",okButtonProps:{danger:!0},style:{top:"200px"}}),(0,v.jsxs)("div",{className:"page",children:[(0,v.jsxs)("div",{className:"page-header-content",children:[(0,v.jsx)("h2",{children:"\u0413\u0440\u0443\u043f\u043f\u0430 \u043e\u043f\u0446\u0438\u0439 \u0432 \u043f\u043e\u0434\u0430\u043a\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445"}),(0,v.jsx)("div",{className:"add-button",onClick:re,children:"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c"})]}),(0,v.jsx)(p.Z,{dataSource:n,columns:ae,pagination:{onChange:ce,total:L,pageSize:20},active:null===C||void 0===C?void 0:C.id,loading:ee})]})]})}}}]);
//# sourceMappingURL=765.b057cb17.chunk.js.map