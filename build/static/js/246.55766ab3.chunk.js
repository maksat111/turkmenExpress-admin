"use strict";(self.webpackChunkturkmenexpressadmin=self.webpackChunkturkmenexpressadmin||[]).push([[246],{3073:function(e,n,t){var a=t(7652),r=(t(2791),t(184));n.Z=function(e){var n=e.dataSource,t=e.columns,i=e.pagination,o=e.active,c=e.loading;return(0,r.jsx)(a.Z,{rowClassName:function(e,n){return e.id==o&&"active-row"},dataSource:n,columns:t,pagination:i,loading:c||!1})}},9246:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var a=t(3433),r=t(4165),i=t(5861),o=t(9439),c=t(2791),s=t(3073),u=t(102),l=t(7027),d=t(814),p=t(7145),f=t(6517),m=t(9286),h=t(2438),v=t(184),g=function(e){return new Promise((function(n,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return n(a.result)},a.onerror=function(e){return t(e)}}))};var x=function(){var e=(0,c.useState)([]),n=(0,o.Z)(e,2),t=n[0],x=n[1],Z=(0,c.useState)(!1),j=(0,o.Z)(Z,2),y=j[0],w=j[1],b=(0,c.useState)(!1),k=(0,o.Z)(b,2),N=k[0],C=k[1],S=(0,c.useState)(null),F=(0,o.Z)(S,2),O=F[0],L=F[1],T=(0,c.useState)(0),P=(0,o.Z)(T,2),E=(P[0],P[1]),R=(0,c.useState)([]),U=(0,o.Z)(R,2),I=U[0],D=U[1],_=(0,c.useState)(!1),z=(0,o.Z)(_,2),M=z[0],q=z[1],A=(0,c.useState)(""),B=(0,o.Z)(A,2),G=B[0],H=B[1],J=(0,c.useState)([]),K=(0,o.Z)(J,2),Q=K[0],V=K[1],W=(0,c.useState)(!1),X=(0,o.Z)(W,2),Y=(X[0],X[1]),$=(0,c.useState)(""),ee=(0,o.Z)($,2),ne=(ee[0],ee[1]),te=(0,c.useState)(""),ae=(0,o.Z)(te,2),re=(ae[0],ae[1]),ie=(0,c.useState)(null),oe=(0,o.Z)(ie,2),ce=oe[0],se=oe[1],ue=(0,c.useState)(null),le=(0,o.Z)(ue,2),de=le[0],pe=le[1],fe=(0,c.useState)(!1),me=(0,o.Z)(fe,2),he=me[0],ve=me[1];(0,c.useEffect)((function(){u.b.get("brands/list").then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,a,i,o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],o=[],pe(n.data.count),null===(t=n.data.results)||void 0===t||t.forEach((function(e){i.push({key:e.id,id:e.id,name:e.name,logo:e.logo,category:e.category?e.category.name_ru:"null"})})),x(i),e.next=7,u.b.get("categories/list/");case 7:c=e.sent,null===(a=c.data)||void 0===a||a.forEach((function(e){o.push({label:e.name_ru,value:e.name_ru,id:e.id})})),se(o);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}),[]);var ge=[{title:"id",dataIndex:"id",key:"id",width:"65px"},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",width:"300px"},{title:"Logo",dataIndex:"logo",key:"logo",render:function(e,n){return(0,v.jsx)("img",{className:"brand-image",src:n.logo,alt:"banner"})}},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",dataIndex:"category",key:"category"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"110px",render:function(e,n){return(0,v.jsx)("div",{className:"delete-icon",onClick:function(){return xe(n)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}},{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"120px",render:function(e,n){return(0,v.jsx)("div",{className:"update-icon",onClick:function(){return we(n)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}}],xe=function(e){L(e),w(!0)},Ze=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,u.b.delete("brands/delete/".concat(O.id));case 4:n=t.filter((function(e){return e.id!==O.id})),x(n),l.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e"),w(!1),C(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),C(!1),l.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,C(!0),n=[],!(Q.length>0)){e.next=7;break}Q.forEach(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("logo",I[0].originFileObj,I[0].originFileObj.name),a.append("name",G),a.append("category",t.id),e.next=6,u.b.post("brands/add/",a);case 6:e.sent,n.push({key:I[0].originFileObj.uid,id:Math.floor(1e3*Math.random()),logo:URL.createObjectURL(I[0].originFileObj),name:G,category:t.name});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=13;break;case 7:return o=new FormData,I[0]&&o.append("logo",I[0].originFileObj,I[0].originFileObj.name),o.append("name",G),e.next=12,u.b.post("brands/add/",o);case 12:e.sent;case 13:V([]),H(""),x([].concat((0,a.Z)(t),n)),l.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),q(!1),D([]),C(!1),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),C(!1),l.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,a,i,o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.onSuccess,a=n.onError,i=n.file,o=n.onProgress,c=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var n=Math.floor(e.loaded/e.total*100);E(n),100===n&&setTimeout((function(){return E(0)}),1e3),o({percent:e.loaded/e.total*100})}},console.log(i),c.append("image",i);try{t("Ok")}catch(r){a("Upload error")}case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),we=function(e){var n;L(e);var t=ce.filter((function(n){return n.label==e.category}));V([{id:null===(n=t[0])||void 0===n?void 0:n.id,label:e.category,value:e.category}]),H(e.name),ve(!0)},be=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{C(!0),Q.forEach(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,I[0]&&t.append("logo",I[0].originFileObj,I[0].originFileObj.name),t.append("name",G),n.id&&t.append("category",n.id),e.next=6,u.b.put("brands/update/".concat(O.id,"/"),t);case 6:e.sent;case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),x((function(e){var n=e,t=n.findIndex((function(e){return e.id===O.id}));return I[0]&&(n[t].logo=URL.createObjectURL(I[0].originFileObj)),n[t].name=G,Q[0]&&(n[t].category=Q[0].value),n})),D([]),V([]),H(""),C(!1),l.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e"),ve(!1)}catch(n){C(!1),l.ZP.error(n.message)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(e){var n=e.fileList;return D(n)},Ne=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n.originFileObj);case 2:n.preview=e.sent,ne(n.preview),Y(!0),re(n.name);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ce=(0,v.jsxs)("div",{children:[(0,v.jsx)(m.Z,{}),(0,v.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),Se=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,u.b.get("brands/list?page=".concat(n));case 3:i=e.sent,null===(t=i.data.results)||void 0===t||t.forEach((function(e){a.push({key:e.id,id:e.id,name:e.name,logo:e.logo,category:e.category?e.category.name_ru:"null"})})),x(a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.Z,{title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f",open:M,onOk:je,confirmLoading:N,onCancel:function(){D([]),q(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",width:"600px",okType:"primary",style:{top:"200px"},children:(0,v.jsxs)("div",{className:"banner-add-container",children:[(0,v.jsxs)("div",{className:"add-left",children:[(0,v.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,v.jsx)("div",{className:"add-column",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,v.jsx)("div",{className:"add-picture",children:"Logo"})]}),(0,v.jsxs)("div",{className:"add-right",children:[(0,v.jsx)("div",{className:"add-column",children:(0,v.jsx)(h.Z,{value:G,allowClear:!0,size:"medium",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435...",onChange:function(e){return H(e.target.value)}})}),(0,v.jsx)("div",{className:"add-column",children:(0,v.jsx)(p.Z,{value:Q,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onChange:function(e){return function(e){var n=[];ce.forEach((function(t){e.forEach((function(e){return t.value==e&&n.push({id:t.id,label:e,value:e})}))})),V(n)}(e)},options:ce})}),(0,v.jsx)("div",{className:"add-picture",children:(0,v.jsx)(f.Z,{customRequest:ye,listType:"picture-card",fileList:I,onPreview:Ne,onChange:ke,children:0==I.length&&Ce})})]})]})}),(0,v.jsx)(d.Z,{title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0434\u043b\u044f \u043e\u0431\u043d\u0430\u0432\u043b\u0435\u043d\u0438\u044f",open:he,onOk:be,confirmLoading:N,onCancel:function(){V([]),H(""),ve(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",width:"700px",okType:"primary",style:{top:"200px"},children:(0,v.jsxs)("div",{className:"banner-add-container",children:[(0,v.jsxs)("div",{className:"add-left",children:[(0,v.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,v.jsx)("div",{className:"add-column",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,v.jsx)("div",{className:"add-picture",children:"Logo"})]}),(0,v.jsxs)("div",{className:"add-right",children:[(0,v.jsx)("div",{className:"add-column",children:(0,v.jsx)(h.Z,{value:G,allowClear:!0,size:"medium",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435...",onChange:function(e){return H(e.target.value)}})}),(0,v.jsx)("div",{className:"add-column",children:(0,v.jsx)(p.Z,{value:Q,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onChange:function(e){return function(e){var n=[];ce.forEach((function(t){e.forEach((function(e){return t.value==e&&n.push({id:t.id,label:e,value:e})}))})),V(n)}(e)},options:ce})}),(0,v.jsxs)("div",{className:"add-picture",children:[(0,v.jsx)("img",{className:"brand-image",src:null===O||void 0===O?void 0:O.logo,alt:"selected"}),(0,v.jsx)(f.Z,{customRequest:ye,listType:"picture-card",fileList:I,onPreview:Ne,onChange:ke,children:0==I.length&&Ce})]})]})]})}),(0,v.jsx)(d.Z,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",open:y,onOk:Ze,confirmLoading:N,onCancel:function(){w(!1)},okButtonProps:{danger:!0},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",okType:"primary",style:{top:"200px"}}),(0,v.jsxs)("div",{className:"page",children:[(0,v.jsxs)("div",{className:"page-header-content",children:[(0,v.jsx)("h2",{children:"\u0411\u0440\u0435\u043d\u0434\u044b"}),(0,v.jsx)("div",{className:"add-button",onClick:function(e){q(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c"})]}),(0,v.jsx)(s.Z,{rowClassName:function(e,n){return 2==n&&"salam"},active:null===O||void 0===O?void 0:O.id,columns:ge,dataSource:t,pagination:{onChange:Se,total:de,pageSize:20}})]})]})}}}]);
//# sourceMappingURL=246.55766ab3.chunk.js.map