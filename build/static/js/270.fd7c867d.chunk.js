"use strict";(self.webpackChunkturkmenexpressadmin=self.webpackChunkturkmenexpressadmin||[]).push([[270],{3073:function(e,n,t){var a=t(7652),r=(t(2791),t(184));n.Z=function(e){var n=e.dataSource,t=e.columns,i=e.pagination,c=e.active,o=e.loading;return(0,r.jsx)(a.Z,{rowClassName:function(e,n){return e.id==c&&"active-row"},dataSource:n,columns:t,pagination:i,loading:o||!1})}},102:function(e,n,t){t.d(n,{b:function(){return s},J:function(){return u}});var a=t(4165),r=t(5861),i=t(1243),c=function(){var e=JSON.parse(localStorage.getItem("turkmenExpress-admin"));return e?e.access:null}(),o="https://turkmenexpress.com.tm/api/administrator/",s=i.Z.create({baseURL:o,timeout:6e4,headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(c)}}),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n,t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(o,"login/"),{phone_number:n,password:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},5270:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var a=t(4942),r=t(1413),i=t(3433),c=t(4165),o=t(5861),s=t(9439),u=t(2791),d=t(3073),l=t(102),m=t(7027),p=t(814),v=t(6517),f=t(9286),x=t(2438),h=t(184),g=function(e){return new Promise((function(n,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return n(a.result)},a.onerror=function(e){return t(e)}}))};var Z=function(){var e=(0,u.useState)([]),n=(0,s.Z)(e,2),t=n[0],Z=n[1],k=(0,u.useState)(!1),j=(0,s.Z)(k,2),w=j[0],_=j[1],y=(0,u.useState)(!1),b=(0,s.Z)(y,2),N=b[0],S=b[1],C=(0,u.useState)(null),L=(0,s.Z)(C,2),T=L[0],I=L[1],O=(0,u.useState)(0),P=(0,s.Z)(O,2),F=(P[0],P[1]),U=(0,u.useState)([]),R=(0,s.Z)(U,2),E=R[0],A=R[1],B=(0,u.useState)(!1),D=(0,s.Z)(B,2),J=D[0],q=D[1],z=(0,u.useState)(!1),M=(0,s.Z)(z,2),G=(M[0],M[1]),H=(0,u.useState)(""),K=(0,s.Z)(H,2),Q=(K[0],K[1]),V=(0,u.useState)(""),W=(0,s.Z)(V,2),X=(W[0],W[1]),Y=(0,u.useState)(null),$=(0,s.Z)(Y,2),ee=$[0],ne=$[1];(0,u.useEffect)((function(){l.b.get("categories/list").then(function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=n.data)||void 0===t||t.forEach((function(e){e.key=e.id})),Z(null===n||void 0===n?void 0:n.data);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}),[]);var te=[{title:"id",dataIndex:"id",key:"id",width:"65px"},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0440\u0443\u0441.)",dataIndex:"name_ru",key:"name_ru"},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0442\u0443\u0440\u043a\u043c.)",dataIndex:"name_tk",key:"name_tk"},{title:"\u041d\u0430\u0432\u0437\u0430\u043d\u0438\u0435 (\u0430\u043d\u0433.)",dataIndex:"name_en",key:"name_en"},{title:"Logo",dataIndex:"image",key:"image",render:function(e,n){return(0,h.jsx)("img",{className:"brand-image",src:n.image,alt:n.name_ru})}},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"110px",render:function(e,n){return(0,h.jsx)("div",{className:"delete-icon",onClick:function(){return ae(n)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}},{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"120px",render:function(e,n){return(0,h.jsx)("div",{className:"update-icon",onClick:function(){return ie(n)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}}],ae=function(e){I(e),_(!0)},re=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),n=t.filter((function(e){return e.id!==T.id})),e.next=5,l.b.delete("categoris/delete/".concat(T.id,"/"));case 5:Z(n),m.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e"),_(!1),S(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),S(!1),m.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ie=function(e){e.id&&(I(e),ne(e)),q(!0)},ce=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n,a,r,o,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),(n=new FormData).append("name_ru",ee.name_ru),n.append("name_en",ee.name_en),n.append("name_tk",ee.name_tk),0!==E.length&&(ee.image=URL.createObjectURL(null===(a=E[0])||void 0===a?void 0:a.originFileObj),n.append("image",null===(r=E[0])||void 0===r?void 0:r.originFileObj,null===(o=E[0])||void 0===o?void 0:o.originFileObj.name)),e.prev=6,!ee.id){e.next=15;break}return e.next=10,l.b.patch("categoris/update/".concat(ee.id,"/"),n);case 10:e.sent,s=t.findIndex((function(e){return e.id==ee.id})),Z((function(e){var n=e;return n[s].name_ru=ee.name_ru,n[s].name_en=ee.name_en,n[s].name_tk=ee.name_tk,n[s].image=ee.image,n})),e.next=19;break;case 15:return e.next=17,l.b.post("categories/add/",n);case 17:e.sent,Z([].concat((0,i.Z)(t),[ee]));case 19:ne(null),m.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),q(!1),A([]),S(!1),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(6),S(!1),m.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 31:case"end":return e.stop()}}),e,null,[[6,26]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var t,a,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.onSuccess,a=n.onError,n.file,r=n.onProgress,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var n=Math.floor(e.loaded/e.total*100);F(n),100===n&&setTimeout((function(){return F(0)}),1e3),r({percent:e.loaded/e.total*100})}};try{t("Ok")}catch(i){a("Upload error")}case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n.originFileObj);case 2:n.preview=e.sent,Q(n.preview),G(!0),X(n.name);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ue=(0,h.jsxs)("div",{children:[(0,h.jsx)(f.Z,{}),(0,h.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),de=function(e){ne((0,r.Z)((0,r.Z)({},ee),{},(0,a.Z)({},e.target.name,[e.target.value])))};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p.Z,{title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f",open:J,onOk:ce,confirmLoading:N,onCancel:function(){A([]),ne(null),q(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",width:"600px",okType:"primary",style:{top:"100px"},children:(0,h.jsxs)("div",{className:"banner-add-container",children:[(0,h.jsxs)("div",{className:"add-left",children:[(0,h.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0440\u0443\u0441.):"}),(0,h.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0442\u0443\u0440\u043a\u043c.):"}),(0,h.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0432\u0437\u0430\u043d\u0438\u0435 (\u0430\u043d\u0433.):"}),(0,h.jsx)("div",{className:"add-picture",children:"Logo"})]}),(0,h.jsxs)("div",{className:"add-right",children:[(0,h.jsx)("div",{className:"add-column",children:(0,h.jsx)(x.Z,{name:"name_ru",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0440\u0443\u0441.)",value:null===ee||void 0===ee?void 0:ee.name_ru,onChange:de})}),(0,h.jsx)("div",{className:"add-column",children:(0,h.jsx)(x.Z,{name:"name_tk",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0442\u0443\u0440\u043a\u043c.)",value:null===ee||void 0===ee?void 0:ee.name_tk,onChange:de})}),(0,h.jsx)("div",{className:"add-column",children:(0,h.jsx)(x.Z,{name:"name_en",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0430\u043d\u0433.)",value:null===ee||void 0===ee?void 0:ee.name_en,onChange:de})}),(0,h.jsxs)("div",{className:"add-picture",children:[(null===ee||void 0===ee?void 0:ee.id)&&(0,h.jsx)("img",{className:"brand-image",src:null===ee||void 0===ee?void 0:ee.image,alt:null===ee||void 0===ee?void 0:ee.name_ru}),(0,h.jsx)(v.Z,{customRequest:oe,listType:"picture-card",fileList:E,onPreview:se,onChange:function(e){var n=e.fileList;return A(n)},children:0==E.length&&ue})]})]})]})}),(0,h.jsx)(p.Z,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",open:w,onOk:re,confirmLoading:N,onCancel:function(){_(!1)},okButtonProps:{danger:!0},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",okType:"primary",style:{top:"200px"}}),(0,h.jsxs)("div",{className:"page",children:[(0,h.jsxs)("div",{className:"page-header-content",children:[(0,h.jsx)("h2",{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),(0,h.jsx)("div",{className:"add-button",onClick:ie,children:"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c"})]}),(0,h.jsx)(d.Z,{active:null===T||void 0===T?void 0:T.id,columns:te,dataSource:t,pagination:!1})]})]})}}}]);
//# sourceMappingURL=270.fd7c867d.chunk.js.map