{"version":3,"file":"static/js/878.a4b68c75.chunk.js","mappings":"gKAeA,IAZA,SAAuBA,GAAwD,IAArDC,EAAUD,EAAVC,WAAYC,EAAOF,EAAPE,QAASC,EAAUH,EAAVG,WAAYC,EAAMJ,EAANI,OAAQC,EAAOL,EAAPK,QAC/D,OACIC,EAAAA,EAAAA,KAACC,EAAAA,EAAK,CACFC,aAAc,SAACC,EAAQC,GAAQ,OAAKD,EAAOE,IAAMP,GAAU,YAAY,EACvEH,WAAYA,EACZC,QAASA,EACTC,WAAYA,EACZE,QAASA,IAAoB,GAGzC,C,oOCJAO,IAAAA,OAAaC,KAoTb,UAlTA,WACI,IAAMC,EAAa,aACnBC,GAAoCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAzCd,EAAUgB,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAAwBJ,EAAAA,EAAAA,WAAS,GAAMK,GAAAH,EAAAA,EAAAA,GAAAE,EAAA,GAAhCE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GAEpBG,GADcC,EAAAA,EAAAA,OAAY,IAAIC,KAAQ,eACMV,EAAAA,EAAAA,WAAS,IAAMW,GAAAT,EAAAA,EAAAA,GAAAM,EAAA,GAApDI,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GACxCG,GAAwCd,EAAAA,EAAAA,UAAS,MAAKe,GAAAb,EAAAA,EAAAA,GAAAY,EAAA,GAA/CE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GACpCG,GAA8BlB,EAAAA,EAAAA,WAAS,GAAMmB,GAAAjB,EAAAA,EAAAA,GAAAgB,EAAA,GAAtCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAC1BG,GAAgCtB,EAAAA,EAAAA,UAAS,MAAKuB,GAAArB,EAAAA,EAAAA,GAAAoB,EAAA,GAAvCE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GAC5BG,GAA4B1B,EAAAA,EAAAA,UAAS,MAAK2B,GAAAzB,EAAAA,EAAAA,GAAAwB,EAAA,GAAnCE,EAAMD,EAAA,GAAEE,EAASF,EAAA,GACxBG,GAA8B9B,EAAAA,EAAAA,UAAS,MAAK+B,GAAA7B,EAAAA,EAAAA,GAAA4B,EAAA,GAArCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAGpBG,EAAY,SAACC,EAAMC,GACjBA,GACAH,EAAWG,GAEfnB,EAAgBkB,GAChB5B,GAAQ,EACZ,EAEM8B,EAAQ,eAAArD,GAAAsD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAC,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEe,GAFfF,EAAAC,KAAA,EAEThC,GAAkB,IACdmB,EAAQ,CAADY,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EACWC,EAAAA,EAAAA,MAAoB,oBAADC,OAAqBhB,EAAQrC,GAAE,KAAK,CAAEP,QAAS4C,EAAQ5C,SAAU,KAAD,EAA5FwD,EAAAK,KACT9C,GAAc,SAAA+C,GACV,IAAIC,EAAID,EACFE,EAAQD,EAAEE,WAAU,SAAAC,GAAO,OAAIA,EAAQ3D,KAAOqC,EAAQrC,EAAE,IAE9D,OADAwD,EAAEC,GAAOhE,QAAU+D,EAAEC,GAAOhE,OACrB+D,CACX,IAAGP,EAAAE,KAAA,uBAAAF,EAAAE,KAAA,GAEGC,EAAAA,EAAAA,OAAqB,oBAADC,OAAqBhC,EAAarB,KAAM,KAAD,GAC3D+C,EAAgBzD,EAAWsE,QAAO,SAAAD,GAAO,OAAIA,EAAQ3D,KAAOqB,EAAarB,EAAE,IACjFQ,EAAcuC,GAAe,QAEjCc,EAAAA,GAAAA,QAAgB,8CAChBvB,EAAW,MACXpB,GAAkB,GAClBN,GAAQ,GAAOqC,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAa,GAAAb,EAAA,SAEf/B,GAAkB,GAClB2C,EAAAA,GAAAA,MAAc,kQACdE,QAAQC,IAAGf,EAAAa,IAAK,yBAAAb,EAAAgB,OAAA,GAAAnB,EAAA,mBAEvB,kBAzBa,OAAAzD,EAAA6E,MAAA,KAAAC,UAAA,MAgCdC,EAAAA,EAAAA,YAAU,WACNhB,EAAAA,EAAAA,IAAkB,kBAAkBiB,MAAK,SAAAC,GAAQ,IAADC,EACpC,QAARA,EAAAD,EAAIE,YAAI,IAAAD,GAARA,EAAUE,SAAQ,SAAAd,GACdA,EAAQe,IAAMf,EAAQ3D,EAC1B,IACAQ,EAAiB,OAAH8D,QAAG,IAAHA,OAAG,EAAHA,EAAKE,KACvB,IAAGG,OAAM,SAAAC,GAAG,OAAIb,QAAQC,IAAIY,EAAI,GACpC,GAAG,IAEH,IAAMrF,EAAU,CACZ,CACIsF,MAAO,KACPC,UAAW,KACXJ,IAAK,KACLK,MAAO,QAEX,CACIF,MAAO,yEACPC,UAAW,UACXJ,IAAK,WAET,CACIG,MAAO,gEACPC,UAAW,QACXJ,IAAK,SAET,CACIG,MAAO,kFACPC,UAAW,mBACXJ,IAAK,oBAET,CACIG,MAAO,mDACPC,UAAW,OACXJ,IAAK,QAET,CACIG,MAAO,mDACPC,UAAW,SACXJ,IAAK,SACLM,OAAQ,SAACC,EAAGnF,GAAM,OACdH,EAAAA,EAAAA,KAACuF,EAAAA,EAAQ,CAACC,QAASrF,EAAOL,OAAQ2F,SAAU,kBAAM7C,EAAU0C,EAAGnF,EAAO,GAAI,GAGlF,CACI+E,MAAO,4EACPC,UAAW,eACXJ,IAAK,eACLM,OAAQ,SAACC,EAAGnF,GAAM,OACdH,EAAAA,EAAAA,KAAA,KAAA0F,SAAIvE,EAAAA,EAAAA,OAAY,IAAIC,KAAKjB,EAAOwF,cAAe,0BAA6B,GAGpF,CACIT,MAAO,8CACPC,UAAW,YACXJ,IAAK,YACLM,OAAQ,SAACC,EAAGnF,GAAM,OACdH,EAAAA,EAAAA,KAAA,KAAA0F,SAAIvE,EAAAA,EAAAA,OAAY,IAAIC,KAAKjB,EAAOyF,WAAY,eAAkB,GAGtE,CACIV,MAAO,8CACPC,UAAW,UACXJ,IAAK,UACLM,OAAQ,SAACC,EAAGnF,GAAM,OACdH,EAAAA,EAAAA,KAAA,KAAA0F,SAAIvE,EAAAA,EAAAA,OAAY,IAAIC,KAAKjB,EAAO0F,SAAU,eAAkB,GAGpE,CACIX,MAAO,6CACPC,UAAW,SACXJ,IAAK,SACLK,MAAO,QACPC,OAAQ,SAACC,EAAGnF,GAAM,OACdH,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,cAAcC,QAAS,kBAAMnD,EAAUzC,EAAO,EAACuF,SAAC,8CAEzD,GAGd,CACIR,MAAO,mDACPC,UAAW,SACXJ,IAAK,SACLK,MAAO,QACPC,OAAQ,SAACC,EAAGnF,GAAM,OACdH,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,cAAcC,QAAS,kBAAMC,EAAa7F,EAAO,EAACuF,SAAC,oDAE5D,IAMZM,EAAe,SAACnD,GAEdA,EAAKxC,KACL8B,EAAYhB,EAAAA,EAAAA,OAAY,IAAIC,KAAKyB,EAAK+C,WAAY,eAClDrD,EAAUpB,EAAAA,EAAAA,OAAY,IAAIC,KAAKyB,EAAKgD,SAAU,eAC9ClD,EAAWE,IAEfd,GAAW,EACf,EAEMkE,GAAW,eAAAC,GAAAlD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAiD,IAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAvD,EAAAA,EAAAA,KAAAI,MAAA,SAAAoD,GAAA,cAAAA,EAAAlD,KAAAkD,EAAAjD,MAAA,OASd,GARFjC,GAAkB,GACZ6E,EAAW,IAAIM,SACrBhE,EAAQkD,UAAY1D,EACpBQ,EAAQmD,QAAUvD,EACZ+D,EAAOM,OAAON,KAAK3D,GACnB4D,EAASK,OAAOL,OAAO5D,GAC7B2D,EAAKvB,SAAQ,SAACC,EAAKjB,GACfsC,EAASQ,OAAO7B,EAAKuB,EAAOxC,GAChC,IAAE2C,EAAAlD,KAAA,GAEMb,EAAQrC,GAAG,CAADoG,EAAAjD,KAAA,gBAAAiD,EAAAjD,KAAA,GACQC,EAAAA,EAAAA,IAAkB,oBAADC,OAAqBhB,EAAQrC,GAAE,KAAK+F,GAAU,KAAD,GAAvEK,EAAA9C,KACH4C,EAAe5G,EAAWoE,WAAU,SAAAlB,GAAI,OAAIA,EAAKxC,IAAMqC,EAAQrC,EAAE,IACvEQ,GAAc,SAAA+C,GACV,IAAMC,EAAID,EAIV,OAHAyC,EAAKvB,SAAQ,SAACC,EAAKjB,GACfD,EAAE0C,GAAcxB,GAAOuB,EAAOxC,EAClC,IACOD,CACX,IAAE4C,EAAAjD,KAAA,wBAAAiD,EAAAjD,KAAA,GAEgBC,EAAAA,EAAAA,KAAmB,iBAAkB2C,GAAU,KAAD,IAA1DzB,EAAG8B,EAAA9C,MACLkB,KAAKE,IAAMJ,EAAIE,KAAKxE,GACxBQ,EAAc,GAAD6C,QAAAmD,EAAAA,EAAAA,GAAKlH,GAAU,CAAEgF,EAAIE,QAAM,QAE5ClC,EAAW,MACXuB,EAAAA,GAAAA,QAAgB,8CAChB3C,GAAkB,GAClBQ,GAAW,GAAO0E,EAAAjD,KAAA,iBAAAiD,EAAAlD,KAAA,GAAAkD,EAAAtC,GAAAsC,EAAA,SAElBlF,GAAkB,GAClB2C,EAAAA,GAAAA,MAAc,kQACdE,QAAQC,IAAGoC,EAAAtC,IAAK,yBAAAsC,EAAAnC,OAAA,GAAA6B,EAAA,mBAEvB,kBAnCgB,OAAAD,EAAA3B,MAAA,KAAAC,UAAA,KA4CXsC,GAAkB,SAACC,GACJ,UAAjBA,EAAEC,OAAOC,KACHtE,GAAUuE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIxE,GAAO,IAAAyE,EAAAA,EAAAA,GAAA,GAAGJ,EAAEC,OAAOC,KAAO,CAACF,EAAEC,OAAOxB,YACpD7C,GAAUuE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIxE,GAAO,IAAAyE,EAAAA,EAAAA,GAAA,GAAGJ,EAAEC,OAAOC,KAAO,CAACF,EAAEC,OAAOI,SAC9D,EAEA,OACIC,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA5B,SAAA,EACI1F,EAAAA,EAAAA,KAACuH,EAAAA,EAAK,CACFrC,MAAM,8FACNlE,KAAMc,EACN0F,KAAMvB,GACN3E,eAAgBA,EAChBmG,SApBY,WACpB9E,EAAW,MACXZ,GAAW,GACXQ,EAAU,MACVJ,EAAY,KAChB,EAgBYuF,WAAY,uCACZC,OAAQ,eACRvC,MAAO,QACPwC,OAAQ,UACRC,MAAO,CAAEC,IAAK,QAASpC,UAEvB2B,EAAAA,EAAAA,MAAA,OAAKvB,UAAU,uBAAsBJ,SAAA,EACjC2B,EAAAA,EAAAA,MAAA,OAAKvB,UAAU,WAAUJ,SAAA,EACrB1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,6EAG5B1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,yFAG5B1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,6EAG5B1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,oEAG5B1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,uFAGnB,OAAPhD,QAAO,IAAPA,GAAAA,EAASrC,MAAML,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,sDAG7C1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,uDAG5B1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,kDAG5B1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,SAAC,qDAIhC2B,EAAAA,EAAAA,MAAA,OAAKvB,UAAU,YAAWJ,SAAA,EACtB1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAAC+H,EAAAA,EAAK,CAACd,KAAK,UAAUe,YAAY,yEAAkBZ,MAAc,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAASuF,QAASxC,SAAUqB,QAE3F9G,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAAC+H,EAAAA,EAAK,CAACd,KAAK,UAAUe,YAAY,qFAAoBZ,MAAc,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAASwF,QAASzC,SAAUqB,QAE7F9G,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAAC+H,EAAAA,EAAK,CAACd,KAAK,UAAUe,YAAY,yEAAkBZ,MAAc,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAASyF,QAAS1C,SAAUqB,QAE3F9G,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAAC+H,EAAAA,EAAK,CAACd,KAAK,QAAQmB,KAAK,SAASJ,YAAY,gEAAcZ,MAAc,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAAS2F,MAAO5C,SAAUqB,QAEjG9G,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAAC+H,EAAAA,EAAK,CAACd,KAAK,mBAAmBmB,KAAK,SAASJ,YAAY,kFAAiBZ,MAAc,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAAS4F,iBAAkB7C,SAAUqB,SAEjH,OAAPpE,QAAO,IAAPA,GAAAA,EAASrC,MAAML,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACxC1F,EAAAA,EAAAA,KAACuF,EAAAA,EAAQ,CAAC0B,KAAK,SAASG,MAAc,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAAS5C,OAAQ2F,SAAUqB,QAE9D9G,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAAC+H,EAAAA,EAAK,CAACd,KAAK,OAAOe,YAAY,mDAAWZ,MAAc,OAAP1E,QAAO,IAAPA,OAAO,EAAPA,EAAS6F,KAAM9C,SAAUqB,QAE9E9G,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAACwI,EAAAA,EAAU,CAACC,YAAU,EAACrB,MAAOlF,GAAY5B,IAAM4B,EAAU1B,GAAaiF,SAAU,SAACiD,GAAC,OAAKvG,EAAYhB,EAAAA,EAAAA,OAAY,IAAIC,KAAKsH,GAAI,cAAc,OAE/I1I,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAYJ,UACvB1F,EAAAA,EAAAA,KAACwI,EAAAA,EAAU,CAACC,YAAU,EAACrB,MAAO9E,GAAUhC,IAAMgC,EAAQ9B,GAAaiF,SAAU,SAACiD,GAAC,OAAKnG,EAAUpB,EAAAA,EAAAA,OAAY,IAAIC,KAAKsH,GAAI,cAAc,eAKrJ1I,EAAAA,EAAAA,KAACuH,EAAAA,EAAK,CACFrC,MAAQxC,EAA8C,4NAApC,+JAClB1B,KAAMA,EACNwG,KAAMzE,EACNzB,eAAgBA,EAChBmG,SA9OS,WACjBxG,GAAQ,GACR0B,EAAW,KACf,EA4OY+E,WAAY,uCACZC,OAAQ,eACRC,OAAQ,UACRe,eAAgBjG,GAAW,CAAEkG,QAAQ,GACrCf,MAAO,CACHC,IAAK,YAGbT,EAAAA,EAAAA,MAAA,OAAKvB,UAAU,OAAMJ,SAAA,EACjB2B,EAAAA,EAAAA,MAAA,OAAKvB,UAAU,sBAAqBJ,SAAA,EAChC1F,EAAAA,EAAAA,KAAA,MAAA0F,SAAI,mEACJ1F,EAAAA,EAAAA,KAAA,OAAK8F,UAAU,aAAaC,QAASC,EAAaN,SAAC,+DAEvD1F,EAAAA,EAAAA,KAAC6I,EAAAA,EAAc,CAAClJ,WAAYA,EAAYC,QAASA,EAASC,YAAY,SAItF,C","sources":["components/TableComponent.js","pages/DiscountList/DiscountList.js"],"sourcesContent":["import { Table } from 'antd';\r\nimport React from 'react';\r\n\r\nfunction TableComponent({ dataSource, columns, pagination, active, loading }) {\r\n    return (\r\n        <Table\r\n            rowClassName={(record, rowIndex) => record.id == active && 'active-row'}\r\n            dataSource={dataSource}\r\n            columns={columns}\r\n            pagination={pagination}\r\n            loading={loading ? loading : false}\r\n        />\r\n    );\r\n}\r\n\r\nexport default TableComponent;","import { React, useEffect, useState } from 'react';\r\nimport { DatePicker, Modal, message } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport date from 'date-and-time';\r\nimport { axiosInstance } from '../../config/axios';\r\nimport TableComponent from '../../components/TableComponent';\r\nimport Input from 'antd/es/input/Input';\r\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\r\nimport Checkbox from 'antd/es/checkbox/Checkbox';\r\ndayjs.extend(customParseFormat);\r\n\r\nfunction DiscountList() {\r\n    const dateFormat = 'YYYY-MM-DD';\r\n    const [dataSource, setDataSource] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n    const today = date.format(new Date(), 'YYYY-MM-DD');\r\n    const [confirmLoading, setConfirmLoading] = useState(false);\r\n    const [selectedItem, setSelectedItem] = useState(null);\r\n    const [addOpen, setAddOpen] = useState(false);\r\n    const [fromDate, setFromDate] = useState(null);\r\n    const [toDate, setToDate] = useState(null);\r\n    const [newItem, setNewItem] = useState(null)\r\n\r\n\r\n    const showModal = (item, item2) => {\r\n        if (item2) {\r\n            setNewItem(item2);\r\n        }\r\n        setSelectedItem(item);\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleOk = async () => {\r\n        try {\r\n            setConfirmLoading(true);\r\n            if (newItem) {\r\n                const res = await axiosInstance.patch(`discounts/update/${newItem.id}/`, { active: !newItem.active });\r\n                setDataSource(previousState => {\r\n                    let a = previousState;\r\n                    const index = a.findIndex(element => element.id === newItem.id);\r\n                    a[index].active = !a[index].active\r\n                    return a\r\n                });\r\n            } else {\r\n                await axiosInstance.delete(`discounts/delete/${selectedItem.id}`);\r\n                const newDataSource = dataSource.filter(element => element.id !== selectedItem.id);\r\n                setDataSource(newDataSource);\r\n            }\r\n            message.success('Успешно');\r\n            setNewItem(null);\r\n            setConfirmLoading(false);\r\n            setOpen(false);\r\n        } catch (err) {\r\n            setConfirmLoading(false)\r\n            message.error('Произошла ошибка. Пожалуйста, попробуйте еще раз!')\r\n            console.log(err)\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setOpen(false);\r\n        setNewItem(null);\r\n    };\r\n\r\n    useEffect(() => {\r\n        axiosInstance.get('discounts/list').then(res => {\r\n            res.data?.forEach(element => {\r\n                element.key = element.id\r\n            });\r\n            setDataSource(res?.data);\r\n        }).catch(err => console.log(err));\r\n    }, []);\r\n\r\n    const columns = [\r\n        {\r\n            title: 'Id',\r\n            dataIndex: 'id',\r\n            key: 'id',\r\n            width: '65px',\r\n        },\r\n        {\r\n            title: 'Название (рус.)',\r\n            dataIndex: 'name_ru',\r\n            key: 'name_ru',\r\n        },\r\n        {\r\n            title: 'Старая цена',\r\n            dataIndex: 'price',\r\n            key: 'price',\r\n        },\r\n        {\r\n            title: 'Процент скидки',\r\n            dataIndex: 'discount_percent',\r\n            key: 'discount_percent',\r\n        },\r\n        {\r\n            title: 'Описание',\r\n            dataIndex: 'desc',\r\n            key: 'desc',\r\n        },\r\n        {\r\n            title: 'Активная',\r\n            dataIndex: 'active',\r\n            key: 'active',\r\n            render: (_, record) => (\r\n                <Checkbox checked={record.active} onChange={() => showModal(_, record)} />\r\n            ),\r\n        },\r\n        {\r\n            title: 'Дата создания',\r\n            dataIndex: 'created_date',\r\n            key: 'created_date',\r\n            render: (_, record) => (\r\n                <p>{date.format(new Date(record.created_date), 'YYYY-MM-DD / HH:MM:SS')}</p>\r\n            ),\r\n        },\r\n        {\r\n            title: 'От числа',\r\n            dataIndex: 'from_date',\r\n            key: 'from_date',\r\n            render: (_, record) => (\r\n                <p>{date.format(new Date(record.from_date), 'YYYY-MM-DD')}</p>\r\n            ),\r\n        },\r\n        {\r\n            title: 'До числа',\r\n            dataIndex: 'to_date',\r\n            key: 'to_date',\r\n            render: (_, record) => (\r\n                <p>{date.format(new Date(record.to_date), 'YYYY-MM-DD')}</p>\r\n            ),\r\n        },\r\n        {\r\n            title: 'Удалить',\r\n            dataIndex: 'active',\r\n            key: 'active',\r\n            width: '110px',\r\n            render: (_, record) => (\r\n                <div className='delete-icon' onClick={() => showModal(record)}>\r\n                    Удалить\r\n                </div>\r\n            ),\r\n        },\r\n        {\r\n            title: 'Изменить',\r\n            dataIndex: 'active',\r\n            key: 'active',\r\n            width: '120px',\r\n            render: (_, record) => (\r\n                <div className='update-icon' onClick={() => showAddModal(record)}>\r\n                    Изменить\r\n                </div>\r\n            ),\r\n        },\r\n    ];\r\n\r\n    //---------------------------------------------------ADD MODAL-------------------------------------------//\r\n    const showAddModal = (item) => {\r\n        // setSelectedItem(item);\r\n        if (item.id) {\r\n            setFromDate(date.format(new Date(item.from_date), 'YYYY-MM-DD'))\r\n            setToDate(date.format(new Date(item.to_date), 'YYYY-MM-DD'))\r\n            setNewItem(item);\r\n        };\r\n        setAddOpen(true);\r\n    };\r\n\r\n    const handleAddOk = async () => {\r\n        setConfirmLoading(true);\r\n        const formData = new FormData();\r\n        newItem.from_date = fromDate;\r\n        newItem.to_date = toDate;\r\n        const keys = Object.keys(newItem);\r\n        const values = Object.values(newItem);\r\n        keys.forEach((key, index) => {\r\n            formData.append(key, values[index]);\r\n        })\r\n        try {\r\n            if (newItem.id) {\r\n                const res = await axiosInstance.put(`discounts/update/${newItem.id}/`, formData);\r\n                const foundedIndex = dataSource.findIndex(item => item.id == newItem.id);\r\n                setDataSource(previousState => {\r\n                    const a = previousState;\r\n                    keys.forEach((key, index) => {\r\n                        a[foundedIndex][key] = values[index];\r\n                    });\r\n                    return a;\r\n                })\r\n            } else {\r\n                const res = await axiosInstance.post('discounts/add/', formData);\r\n                res.data.key = res.data.id;\r\n                setDataSource([...dataSource, res.data])\r\n            }\r\n            setNewItem(null);\r\n            message.success('Успешно')\r\n            setConfirmLoading(false);\r\n            setAddOpen(false);\r\n        } catch (err) {\r\n            setConfirmLoading(false)\r\n            message.error('Произошла ошибка. Пожалуйста, попробуйте еще раз!')\r\n            console.log(err)\r\n        }\r\n    };\r\n\r\n    const handleAddCancel = () => {\r\n        setNewItem(null)\r\n        setAddOpen(false);\r\n        setToDate(null);\r\n        setFromDate(null);\r\n    };\r\n\r\n    const handleAddChange = (e) => {\r\n        e.target.name == 'active'\r\n            ? setNewItem({ ...newItem, [e.target.name]: [e.target.checked] })\r\n            : setNewItem({ ...newItem, [e.target.name]: [e.target.value] });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Modal\r\n                title=\"Дополните детали\"\r\n                open={addOpen}\r\n                onOk={handleAddOk}\r\n                confirmLoading={confirmLoading}\r\n                onCancel={handleAddCancel}\r\n                cancelText={'Отмена'}\r\n                okText={'Да'}\r\n                width={'600px'}\r\n                okType={'primary'}\r\n                style={{ top: '50px' }}\r\n            >\r\n                <div className='banner-add-container'>\r\n                    <div className='add-left'>\r\n                        <div className='add-column'>\r\n                            Название (рус.):\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            Название (туркм.):\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            Навзание (анг.):\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            Старая цена:\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            Процент скидки:\r\n                        </div>\r\n                        {!newItem?.id && <div className='add-column'>\r\n                            Активная\r\n                        </div>}\r\n                        <div className='add-column'>\r\n                            Описание:\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            От числа:\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            До числв:\r\n                        </div>\r\n                    </div>\r\n                    <div className='add-right'>\r\n                        <div className='add-column'>\r\n                            <Input name='name_ru' placeholder='Название (рус.)' value={newItem?.name_ru} onChange={handleAddChange} />\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            <Input name='name_tk' placeholder='Название (туркм.)' value={newItem?.name_tk} onChange={handleAddChange} />\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            <Input name='name_en' placeholder='Название (анг.)' value={newItem?.name_en} onChange={handleAddChange} />\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            <Input name='price' type='number' placeholder='Старая цена' value={newItem?.price} onChange={handleAddChange} />\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            <Input name='discount_percent' type='number' placeholder='Процент скидки' value={newItem?.discount_percent} onChange={handleAddChange} />\r\n                        </div>\r\n                        {!newItem?.id && <div className='add-column'>\r\n                            <Checkbox name='active' value={newItem?.active} onChange={handleAddChange} />\r\n                        </div>}\r\n                        <div className='add-column'>\r\n                            <Input name='desc' placeholder='Описание' value={newItem?.desc} onChange={handleAddChange} />\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            <DatePicker allowClear value={fromDate && dayjs(fromDate, dateFormat)} onChange={(d) => setFromDate(date.format(new Date(d), 'YYYY-MM-DD'))} />\r\n                        </div>\r\n                        <div className='add-column'>\r\n                            <DatePicker allowClear value={toDate && dayjs(toDate, dateFormat)} onChange={(d) => setToDate(date.format(new Date(d), 'YYYY-MM-DD'))} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n            <Modal\r\n                title={!newItem ? \"Вы уверены, что хотите удалить?\" : 'Вы уверены, что хотите изменить активност?'}\r\n                open={open}\r\n                onOk={handleOk}\r\n                confirmLoading={confirmLoading}\r\n                onCancel={handleCancel}\r\n                cancelText={'Отмена'}\r\n                okText={'Да'}\r\n                okType={'primary'}\r\n                okButtonProps={!newItem && { danger: true }}\r\n                style={{\r\n                    top: '200px'\r\n                }}\r\n            />\r\n            <div className='page'>\r\n                <div className='page-header-content'>\r\n                    <h2>Виды скидок</h2>\r\n                    <div className='add-button' onClick={showAddModal}>Добавлять</div>\r\n                </div>\r\n                <TableComponent dataSource={dataSource} columns={columns} pagination={false} />\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default DiscountList;"],"names":["_ref","dataSource","columns","pagination","active","loading","_jsx","Table","rowClassName","record","rowIndex","id","dayjs","customParseFormat","dateFormat","_useState","useState","_useState2","_slicedToArray","setDataSource","_useState3","_useState4","open","setOpen","_useState5","date","Date","_useState6","confirmLoading","setConfirmLoading","_useState7","_useState8","selectedItem","setSelectedItem","_useState9","_useState10","addOpen","setAddOpen","_useState11","_useState12","fromDate","setFromDate","_useState13","_useState14","toDate","setToDate","_useState15","_useState16","newItem","setNewItem","showModal","item","item2","handleOk","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newDataSource","wrap","_context","prev","next","axiosInstance","concat","sent","previousState","a","index","findIndex","element","filter","message","t0","console","log","stop","apply","arguments","useEffect","then","res","_res$data","data","forEach","key","catch","err","title","dataIndex","width","render","_","Checkbox","checked","onChange","children","created_date","from_date","to_date","className","onClick","showAddModal","handleAddOk","_ref2","_callee2","formData","keys","values","foundedIndex","_res","_context2","FormData","Object","append","_toConsumableArray","handleAddChange","e","target","name","_objectSpread","_defineProperty","value","_jsxs","_Fragment","Modal","onOk","onCancel","cancelText","okText","okType","style","top","Input","placeholder","name_ru","name_tk","name_en","type","price","discount_percent","desc","DatePicker","allowClear","d","okButtonProps","danger","TableComponent"],"sourceRoot":""}