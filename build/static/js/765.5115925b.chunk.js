"use strict";(self.webpackChunkturkmenexpressadmin=self.webpackChunkturkmenexpressadmin||[]).push([[765],{3073:function(e,n,t){var a=t(7652),r=(t(2791),t(184));n.Z=function(e){var n=e.dataSource,t=e.columns,o=e.pagination,c=e.active,i=e.loading;return(0,r.jsx)(a.Z,{rowClassName:function(e,n){return e.id==c&&"active-row"},dataSource:n,columns:t,pagination:o,loading:i||!1})}},8765:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}});var a=t(3433),r=t(4165),o=t(5861),c=t(9439),i=t(2791),u=t(7027),s=t(814),d=t(7145),l=t(102),p=t(3073),f=t(1243),v=t(184);var h=function(){var e=(0,i.useState)([]),n=(0,c.Z)(e,2),t=n[0],h=n[1],g=(0,i.useState)(!1),m=(0,c.Z)(g,2),x=m[0],y=m[1],b=(0,i.useState)(!1),Z=(0,c.Z)(b,2),k=Z[0],w=Z[1],j=(0,i.useState)(null),S=(0,c.Z)(j,2),C=S[0],N=S[1],_=(0,i.useState)(!1),E=(0,c.Z)(_,2),I=E[0],T=E[1],P=(0,i.useState)(null),F=(0,c.Z)(P,2),D=F[0],L=F[1],O=(0,i.useState)([]),z=(0,c.Z)(O,2),B=z[0],q=z[1],A=(0,i.useState)([]),G=(0,c.Z)(A,2),H=G[0],J=G[1],K=(0,i.useState)([]),M=(0,c.Z)(K,2),Q=M[0],R=M[1],U=(0,i.useState)([]),V=(0,c.Z)(U,2),W=V[0],X=V[1],Y=(0,i.useState)(!1),$=(0,c.Z)(Y,2),ee=$[0],ne=$[1],te=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,l.b.delete("subcategory-options-group/delete/".concat(C.id));case 4:n=t.filter((function(e){return e.id!==C.id})),h(n),u.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e!"),y(!1),w(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),w(!1),u.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=[],n=[],t=[];ne(!0),l.b.get("subcategory-options-group/list").then(function(){var a=(0,o.Z)((0,r.Z)().mark((function a(o){var c;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return L(o.data.count),null===(c=o.data)||void 0===c||c.results.forEach((function(n){e.push({key:n.id,id:n.id,subcategory:"".concat(n.subcategory.category.name_ru," | ").concat(n.subcategory.name_ru),option:n.option.name_ru})})),a.next=4,f.Z.get("https://turkmenexpress.com.tm/api/library/subcategories/list/");case 4:return a.sent.data.forEach((function(e){n.push({label:"".concat(e.category.name_ru," | ").concat(e.name_ru),value:"".concat(e.category.name_ru," | ").concat(e.name_ru),id:e.id})})),a.next=8,l.b.get("options-group/list/");case 8:a.sent.data.forEach((function(e){t.push({label:e.name_ru,value:e.name_ru,id:e.id})})),R(n),X(t),h(e),ne(!1);case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}),[]);var ae=[{title:"id",dataIndex:"id",key:"id",width:"65px",style:{alignItems:"center"}},{title:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",dataIndex:"subcategory",key:"subcategory"},{title:"\u041e\u043f\u0446\u0438\u044f",dataIndex:"option",key:"option"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"110px",render:function(e,n){return(0,v.jsx)("div",{className:"delete-icon",onClick:function(){return e=n,y(!0),void N(e);var e},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}},{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"120px",render:function(e,n){return(0,v.jsx)("div",{className:"update-icon",onClick:function(){return re(n)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}}],re=function(e){e.id?(N(e),q(null===Q||void 0===Q?void 0:Q.filter((function(n){return n.value==e.subcategory}))),J(null===W||void 0===W?void 0:W.filter((function(n){return n.value==e.option})))):N(null),T(!0)},oe=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var n,c,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),e.prev=1,null!==C&&void 0!==C&&C.id){e.next=8;break}n=[],B.forEach((function(e){H.forEach(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(a){var o,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("subcategory",e.id),o.append("option",a.id),t.next=5,l.b.post("subcategory-options-group/add/",o);case 5:c=t.sent,n.push({key:c.data.id,id:c.data.id,subcategory:e.label,option:a.label});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),h([].concat((0,a.Z)(t),n)),e.next=16;break;case 8:return(c=new FormData).append("subcategory",B[0].id),c.append("option",H[0].id),e.next=13,l.b.patch("subcategory-options-group/update/".concat(C.id,"/"),c);case 13:e.sent,i=t.findIndex((function(e){return e.id==C.id})),h((function(e){var n=e;return n[i].subcategory=B[0].value,n[i].option=H[0].value,n}));case 16:J([]),q([]),w(!1),u.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),T(!1),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(1),w(!1),u.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var t,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,l.b.get("subcategory-options-group/list?page=".concat(n));case 3:o=e.sent,null===(t=o.data.results)||void 0===t||t.forEach((function(e){a.push({key:e.id,id:e.id,subcategory:"".concat(e.subcategory.category.name_ru," | ").concat(e.subcategory.name_ru),option:e.option.name_ru})})),h(a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.Z,{title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438",open:I,onOk:oe,confirmLoading:k,onCancel:function(){J([]),q([]),T(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",width:"700px",okType:"primary",style:{top:"150px"},children:(0,v.jsxs)("div",{className:"banner-add-container",children:[(0,v.jsxs)("div",{className:"add-left",children:[(0,v.jsx)("div",{className:"add-column",children:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f:"}),(0,v.jsx)("div",{className:"add-column",children:"\u041e\u043f\u0446\u0438\u044f:"})]}),(0,v.jsxs)("div",{className:"add-right",children:[(0,v.jsx)("div",{className:"subcategory-settings-add-column add-column",children:(0,v.jsx)(d.Z,{value:B,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onChange:function(e){return function(e){var n=[];null===Q||void 0===Q||Q.forEach((function(t){e.forEach((function(e){return t.value==e&&n.push({id:t.id,label:e,value:e})}))})),q(n)}(e)},options:Q})}),(0,v.jsx)("div",{className:"subcategory-settings-add-column add-column",children:(0,v.jsx)(d.Z,{value:H,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u043f\u0446\u0438\u044e",onChange:function(e){return function(e){var n=[];null===W||void 0===W||W.forEach((function(t){e.forEach((function(e){return t.value==e&&n.push({id:t.id,label:e,value:e})}))})),J(n)}(e)},options:W})})]})]})}),(0,v.jsx)(s.Z,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",open:x,onOk:te,confirmLoading:k,onCancel:function(){y(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",okType:"primary",okButtonProps:{danger:!0},style:{top:"200px"}}),(0,v.jsxs)("div",{className:"page",children:[(0,v.jsxs)("div",{className:"page-header-content",children:[(0,v.jsx)("h2",{children:"\u0413\u0440\u0443\u043f\u043f\u0430 \u043e\u043f\u0446\u0438\u0439 \u0432 \u043f\u043e\u0434\u0430\u043a\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u0445"}),(0,v.jsx)("div",{className:"add-button",onClick:re,children:"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c"})]}),(0,v.jsx)(p.Z,{dataSource:t,columns:ae,pagination:{onChange:ce,total:D,pageSize:20},active:null===C||void 0===C?void 0:C.id,loading:ee})]})]})}}}]);
//# sourceMappingURL=765.5115925b.chunk.js.map