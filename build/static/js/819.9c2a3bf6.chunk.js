"use strict";(self.webpackChunkturkmenexpressadmin=self.webpackChunkturkmenexpressadmin||[]).push([[819],{3073:function(e,n,a){var t=a(7652),r=(a(2791),a(184));n.Z=function(e){var n=e.dataSource,a=e.columns,i=e.pagination,c=e.active,o=e.loading;return(0,r.jsx)(t.Z,{rowClassName:function(e,n){return e.id==c&&"active-row"},dataSource:n,columns:a,pagination:i,loading:o||!1})}},102:function(e,n,a){a.d(n,{b:function(){return u},J:function(){return s}});var t=a(4165),r=a(5861),i=a(1243),c=function(){var e=JSON.parse(localStorage.getItem("turkmenExpress-admin"));return e?e.access:null}(),o="https://turkmenexpress.com.tm/api/administrator/",u=i.Z.create({baseURL:o,timeout:6e4,headers:{"Content-Type":"multipart/form-data",Accept:"application/json",Authorization:"Bearer ".concat(c)}}),s=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(n,a){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.post("".concat(o,"login/"),{phone_number:n,password:a});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}()},4819:function(e,n,a){a.r(n),a.d(n,{default:function(){return k}});var t=a(4942),r=a(1413),i=a(3433),c=a(4165),o=a(5861),u=a(9439),s=a(2791),d=a(3073),l=a(102),m=a(7027),p=a(814),f=a(7145),v=a(6517),h=a(9286),g=a(2438),x=a(184),Z=function(e){return new Promise((function(n,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return n(t.result)},t.onerror=function(e){return a(e)}}))};var k=function(){var e=(0,s.useState)([]),n=(0,u.Z)(e,2),a=n[0],k=n[1],_=(0,s.useState)(!1),y=(0,u.Z)(_,2),j=y[0],b=y[1],w=(0,s.useState)(!1),N=(0,u.Z)(w,2),S=N[0],C=N[1],O=(0,s.useState)(null),F=(0,u.Z)(O,2),L=F[0],I=F[1],T=(0,s.useState)(null),E=(0,u.Z)(T,2),P=E[0],U=E[1],R=(0,s.useState)(0),A=(0,u.Z)(R,2),D=(A[0],A[1]),M=(0,s.useState)([]),z=(0,u.Z)(M,2),B=z[0],J=z[1],q=(0,s.useState)(!1),G=(0,u.Z)(q,2),H=G[0],K=G[1],Q=(0,s.useState)(!1),V=(0,u.Z)(Q,2),W=(V[0],V[1]),X=(0,s.useState)(null),Y=(0,u.Z)(X,2),$=Y[0],ee=Y[1],ne=(0,s.useState)(""),ae=(0,u.Z)(ne,2),te=(ae[0],ae[1]),re=(0,s.useState)(""),ie=(0,u.Z)(re,2),ce=(ie[0],ie[1]),oe=(0,s.useState)([]),ue=(0,u.Z)(oe,2),se=ue[0],de=ue[1],le=(0,s.useState)(null),me=(0,u.Z)(le,2),pe=me[0],fe=me[1];(0,s.useEffect)((function(){l.b.get("subcategories/list").then(function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var a,t,r,i,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=[],U(n.data.count),null===(a=n.data)||void 0===a||a.results.forEach((function(e){r.push({id:e.id,key:e.id,name_ru:e.name_ru,name_en:e.name_en,name_tk:e.name_tk,image:e.image,category:e.category.name_ru})})),k(r),e.next=7,l.b.get("categories/list/");case 7:o=e.sent,null===(t=o.data)||void 0===t||t.forEach((function(e){i.push({label:e.name_ru,value:e.name_ru,id:e.id})})),ee(i);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}),[]);var ve=[{title:"id",dataIndex:"id",key:"id",width:"65px"},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0440\u0443\u0441.)",dataIndex:"name_ru",key:"name_ru"},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0442\u0443\u0440\u043a\u043c.)",dataIndex:"name_tk",key:"name_tk"},{title:"\u041d\u0430\u0432\u0437\u0430\u043d\u0438\u0435 (\u0430\u043d\u0433.)",dataIndex:"name_en",key:"name_en"},{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",dataIndex:"category",key:"category"},{title:"Logo",dataIndex:"image",key:"image",render:function(e,n){return(0,x.jsx)("img",{className:"subcategory-image",src:n.image,alt:n.name_ru})}},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"110px",render:function(e,n){return(0,x.jsx)("div",{className:"delete-icon",onClick:function(){return he(n)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}},{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",dataIndex:"active",key:"active",width:"120px",render:function(e,n){return(0,x.jsx)("div",{className:"update-icon",onClick:function(){return xe(n)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}}],he=function(e){I(e),b(!0)},ge=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),n=a.filter((function(e){return e.id!==L.id})),e.next=5,l.b.delete("subcategoris/delete/".concat(L.id,"/"));case 5:k(n),m.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e"),b(!1),C(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),C(!1),m.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),xe=function(e){if(e.id){var n;I(e);var a=$.filter((function(n){return n.label==e.category}));de([{id:null===(n=a[0])||void 0===n?void 0:n.id,label:e.category,value:e.category}]),fe(e)}K(!0)},Ze=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var n,t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!pe.id){e.next=15;break}return n=new FormData,B[0]&&n.append("image",B[0].originFileObj,B[0].originFileObj.name),n.append("name_ru",pe.name_ru),n.append("name_en",pe.name_en),n.append("name_tk",pe.name_tk),n.append("category",se[0].id),e.next=10,l.b.patch("subcategoris/update/".concat(pe.id,"/"),n);case 10:e.sent,t=a.findIndex((function(e){return e.id==pe.id})),k((function(e){var n=e;return n[t].name_ru=pe.name_ru,n[t].name_en=pe.name_en,n[t].name_tk=pe.name_tk,n[t].image=B[0]?URL.createObjectURL(B[0].originFileObj):pe.image,n[t].category=se[0].value,n})),e.next=19;break;case 15:r=[],C(!0),se.forEach(function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("image",B[0].originFileObj,B[0].originFileObj.name),a.append("name_ru",pe.name_ru),a.append("name_en",pe.name_en),a.append("name_tk",pe.name_tk),a.append("category",n.id),e.next=8,l.b.post("subcategories/add/",a);case 8:e.sent,r.push({key:B[0].originFileObj.uid,id:Math.floor(1e3*Math.random()),image:URL.createObjectURL(B[0].originFileObj),name_ru:pe.name_ru,name_en:pe.name_en,name_tk:pe.name_tk,category:n.name});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),k([].concat((0,i.Z)(a),r));case 19:de([]),fe(null),m.ZP.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),K(!1),J([]),C(!1),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(0),C(!1),m.ZP.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437!"),console.log(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var a,t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.onSuccess,t=n.onError,n.file,r=n.onProgress,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var n=Math.floor(e.loaded/e.total*100);D(n),100===n&&setTimeout((function(){return D(0)}),1e3),r({percent:e.loaded/e.total*100})}};try{a("Ok")}catch(i){t("Upload error")}case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_e=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(n.originFileObj);case 2:n.preview=e.sent,te(n.preview),W(!0),ce(n.name);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ye=(0,x.jsxs)("div",{children:[(0,x.jsx)(h.Z,{}),(0,x.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),je=function(e){fe((0,r.Z)((0,r.Z)({},pe),{},(0,t.Z)({},e.target.name,[e.target.value])))},be=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var a,t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,l.b.get("subcategories/list?page=".concat(n));case 3:r=e.sent,null===(a=r.data.results)||void 0===a||a.forEach((function(e){t.push({id:e.id,key:e.id,name_ru:e.name_ru,name_en:e.name_en,name_tk:e.name_tk,image:e.image,category:e.category.name_ru})})),k(t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.Z,{title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f",open:H,onOk:Ze,confirmLoading:S,onCancel:function(){de([]),J([]),fe(null),K(!1)},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",width:"600px",okType:"primary",style:{top:"100px"},children:(0,x.jsxs)("div",{className:"banner-add-container",children:[(0,x.jsxs)("div",{className:"add-left",children:[(0,x.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0440\u0443\u0441.):"}),(0,x.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0442\u0443\u0440\u043a\u043c.):"}),(0,x.jsx)("div",{className:"add-column",children:"\u041d\u0430\u0432\u0437\u0430\u043d\u0438\u0435 (\u0430\u043d\u0433.):"}),(0,x.jsx)("div",{className:"add-column",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f:"}),(0,x.jsx)("div",{className:"add-picture",children:"Logo"})]}),(0,x.jsxs)("div",{className:"add-right",children:[(0,x.jsx)("div",{className:"add-column",children:(0,x.jsx)(g.Z,{name:"name_ru",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0440\u0443\u0441.)",value:null===pe||void 0===pe?void 0:pe.name_ru,onChange:je})}),(0,x.jsx)("div",{className:"add-column",children:(0,x.jsx)(g.Z,{name:"name_tk",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0442\u0443\u0440\u043a\u043c.)",value:null===pe||void 0===pe?void 0:pe.name_tk,onChange:je})}),(0,x.jsx)("div",{className:"add-column",children:(0,x.jsx)(g.Z,{name:"name_en",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 (\u0430\u043d\u0433.)",value:null===pe||void 0===pe?void 0:pe.name_en,onChange:je})}),(0,x.jsx)("div",{className:"add-column",children:(0,x.jsx)(f.Z,{value:se,mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onChange:function(e){return function(e){var n=[];$.forEach((function(a){e.forEach((function(e){return a.value==e&&n.push({id:a.id,label:e,value:e})}))})),de(n)}(e)},options:$})}),(0,x.jsxs)("div",{className:"add-picture",children:[(null===pe||void 0===pe?void 0:pe.id)&&(0,x.jsx)("img",{className:"subcategory-image",src:null===pe||void 0===pe?void 0:pe.image,alt:null===pe||void 0===pe?void 0:pe.name_ru}),(0,x.jsx)(v.Z,{customRequest:ke,listType:"picture-card",fileList:B,onPreview:_e,onChange:function(e){var n=e.fileList;return J(n)},children:0==B.length&&ye})]})]})]})}),(0,x.jsx)(p.Z,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",open:j,onOk:ge,confirmLoading:S,onCancel:function(){b(!1)},okButtonProps:{danger:!0},cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okText:"\u0414\u0430",okType:"primary",style:{top:"200px"}}),(0,x.jsxs)("div",{className:"page",children:[(0,x.jsxs)("div",{className:"page-header-content",children:[(0,x.jsx)("h2",{children:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),(0,x.jsx)("div",{className:"add-button",onClick:xe,children:"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c"})]}),(0,x.jsx)(d.Z,{active:null===L||void 0===L?void 0:L.id,columns:ve,dataSource:a,pagination:{onChange:be,total:P,pageSize:20}})]})]})}}}]);
//# sourceMappingURL=819.9c2a3bf6.chunk.js.map